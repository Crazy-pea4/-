<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <!-- Promise任务是一个微任务 -->
    <script>
      // 如果直接使用传统回调方式去完成复杂的异步流程，会造成“回调地狱”
      // Promise 是es6中新增的一个对象，可以将异步操作以同步的流程表达出来，避免了层层嵌套的回调函数
      // Promise 提供一个excutor执行器，它接收两个参数分别是resolve、reject，！它是一个同步回调！
      // Promise 执行过程：Pending（等待过程）Fullfilled（成功、承诺兑现）Rejected（失败、承诺不兑现）注意：承诺的状态一旦确定下来，不再改变，就算后面改变了承诺状态。
      const promise = new Promise(function (resolve, reject) {
        // resolve和reject都是函数，其作用分别是将Promise状态修改成Fullfilled或Rejected

        // resolve(200) // 承诺兑现

        reject(404); // 承诺不兑现
      });
      // 在创建了Promise对象之后，还需要指定回调      .then(承诺兑现函数,承诺不兑现函数)
      promise.then(
        (result) => {
          console.log("resolve", result);
        },
        (err) => {
          console.log("reject", err);
        }
      );
      console.log(111); // 可以看到就算promise中没有异步操作，但then方法依然会排队到回调任务列表中
    </script>
  </body>
</html>
